Version 4
SHEET 1 1152 680
WIRE -448 -592 -496 -592
WIRE 144 -592 -448 -592
WIRE 288 -592 144 -592
WIRE 608 -592 384 -592
WIRE -1072 -576 -1248 -576
WIRE 144 -544 144 -592
WIRE -1072 -512 -1072 -576
WIRE 608 -512 608 -592
WIRE -496 -480 -496 -592
WIRE 144 -432 144 -464
WIRE 256 -432 144 -432
WIRE 304 -432 304 -544
WIRE 304 -432 256 -432
WIRE -1248 -416 -1248 -576
WIRE -1072 -416 -1072 -432
WIRE -944 -416 -1072 -416
WIRE -896 -416 -944 -416
WIRE 144 -416 144 -432
WIRE -1072 -368 -1072 -416
WIRE 608 -352 608 -432
WIRE -1248 -256 -1248 -336
WIRE -1072 -256 -1072 -288
WIRE -1072 -256 -1248 -256
WIRE -496 -256 -496 -400
WIRE 848 -240 704 -240
WIRE 896 -240 848 -240
WIRE -1248 -192 -1248 -256
WIRE 144 -144 144 -336
WIRE 304 -144 144 -144
WIRE 496 -144 368 -144
WIRE 592 -144 496 -144
WIRE 704 -144 704 -240
WIRE 704 -144 656 -144
WIRE 736 -144 704 -144
WIRE 848 -144 816 -144
WIRE 144 -128 144 -144
WIRE -224 -80 -304 -80
WIRE -112 -80 -160 -80
WIRE 32 -80 -32 -80
WIRE 80 -80 32 -80
WIRE 496 -80 496 -144
WIRE 848 -80 848 -144
WIRE 448 -64 288 -64
WIRE -464 -32 -464 -80
WIRE 32 -32 32 -80
WIRE 448 -16 368 -16
WIRE -464 80 -464 48
WIRE 32 80 32 48
WIRE 144 80 144 -32
WIRE 144 80 32 80
WIRE 288 80 288 -64
WIRE 288 80 144 80
WIRE 368 80 368 64
WIRE 368 80 288 80
WIRE 496 80 496 0
WIRE 496 80 368 80
WIRE 848 80 848 0
WIRE 848 80 496 80
WIRE 144 112 144 80
WIRE -304 208 -304 -80
WIRE -304 320 -304 288
FLAG -496 -256 0
FLAG 608 -352 0
FLAG -448 -592 VIN
FLAG 256 -432 VGate
FLAG 144 112 0
FLAG -464 80 0
FLAG -1248 -192 0
FLAG -944 -416 ADC-IN
FLAG -304 320 0
FLAG 848 -240 GPIO_IN
SYMBOL pmos 384 -544 M270
WINDOW 3 62 64 Left 2
SYMATTR Value Si9407AEY
SYMATTR InstName M1
SYMBOL voltage -496 -496 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 42
SYMBOL res 592 -528 R0
SYMATTR InstName Load
SYMATTR Value 100
SYMBOL res 128 -560 R0
SYMATTR InstName R1
SYMATTR Value 22K
SYMBOL res 128 -432 R0
SYMATTR InstName R2
SYMATTR Value 47K
SYMBOL npn 80 -128 R0
SYMATTR InstName Q1
SYMATTR Value 2SC5876
SYMBOL res -16 -96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R3
SYMATTR Value 12K
SYMBOL voltage -464 -48 R0
WINDOW 3 -365 108 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 3 1ms 0 0 2ms)
SYMATTR InstName V2
SYMBOL schottky -224 -64 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D1
SYMATTR Value BAT54
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res 16 -48 R0
SYMATTR InstName R4
SYMATTR Value 12K
SYMBOL voltage -1248 -432 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 4V
SYMBOL res -1088 -528 R0
SYMATTR InstName R5
SYMATTR Value 12K
SYMBOL res -1088 -384 R0
SYMATTR InstName R6
SYMATTR Value 36K
SYMBOL sw 496 -96 R0
SYMATTR InstName S1
SYMATTR Value MYSW
SYMBOL schottky 304 -128 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value BAT54
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL voltage 368 -32 R0
WINDOW 3 -131 154 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 1 1ms 0 0 2ms)
SYMATTR InstName V4
SYMBOL voltage 848 -96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V5
SYMATTR Value 3
SYMBOL schottky 656 -128 M270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D3
SYMATTR Value BAT54
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL res 832 -160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 10K
SYMBOL bv -304 192 R0
SYMATTR InstName DLY1
SYMATTR Value V=3-delay(V(GPIO_IN),1m)
TEXT -528 -232 Left 2 !.tran 5ms
TEXT 552 40 Left 2 !.model MYSW SW(Ron=1 Roff=1Meg Vt=.5 Vh=-.4)
TEXT -240 352 Left 2 ;Phasenshieber
